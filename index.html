<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Tools Detection - Enhanced</title>
    <style>
        .blocked {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            color: #ff0000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            font-size: 2em;
            text-align: center;
        }

        .blocked h2 {
            font-size: 3em;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .blocked h11 {
            font-size: 2em;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .detection-methods {
            text-align: left;
            margin-top: 30px;
        }

        .detection-methods h3 {
            color: #ffeb3b;
        }

        .method {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <script>
        // نظام السجلات - Logging System
        const DevToolsLogger = {
            logKey: 'devtools_access_log',
            
            // إضافة سجل جديد
            addLog: function(type, details) {
                const logs = this.getLogs();
                const newLog = {
                    timestamp: new Date().toISOString(),
                    type: type, // 'detected', 'blocked'
                    details: details,
                    userAgent: navigator.userAgent,
                    screenInfo: {
                        width: screen.width,
                        height: screen.height,
                        availWidth: screen.availWidth,
                        availHeight: screen.availHeight,
                        innerWidth: window.innerWidth,
                        innerHeight: window.innerHeight,
                        outerWidth: window.outerWidth,
                        outerHeight: window.outerHeight,
                        zoom: this.getZoomLevel()
                    }
                };
                
                logs.push(newLog);
                
                // الاحتفاظ بآخر 50 سجل فقط
                if (logs.length > 50) {
                    logs.splice(0, logs.length - 50);
                }
                
                try {
                    localStorage.setItem(this.logKey, JSON.stringify(logs));
                } catch(e) {
                    console.warn('Could not save to localStorage:', e);
                }
            },
            
            // الحصول على السجلات
            getLogs: function() {
                try {
                    const logs = localStorage.getItem(this.logKey);
                    return logs ? JSON.parse(logs) : [];
                } catch(e) {
                    console.warn('Could not read from localStorage:', e);
                    return [];
                }
            },
            
            // حساب مستوى التكبير
            getZoomLevel: function() {
                return Math.round((window.outerWidth / window.innerWidth) * 100);
            },
            
            // مسح السجلات
            clearLogs: function() {
                try {
                    localStorage.removeItem(this.logKey);
                } catch(e) {
                    console.warn('Could not clear localStorage:', e);
                }
            }
        };

        let devToolsOpen = false;
        
        // كشف مستوى التكبير المحسّن
        function getAccurateZoomLevel() {
            // طريقة أكثر دقة لحساب التكبير
            const screenCssPixelRatio = (window.outerWidth - 8) / window.innerWidth;
            const zoom = Math.round(screenCssPixelRatio * 100);
            return zoom;
        }

        // كشف أدوات المطور بحساب التكبير
        function detectDevToolsBySize() {
            const zoom = getAccurateZoomLevel();
            const heightThreshold = zoom >= 125 ? 300 : 200; // تعديل الحد الأدنى حسب التكبير
            const widthThreshold = zoom >= 125 ? 300 : 200;
            
            // تسجيل معلومات التشخيص
            DevToolsLogger.addLog('size_check', {
                zoom: zoom,
                outerHeight: window.outerHeight,
                innerHeight: window.innerHeight,
                heightDiff: window.outerHeight - window.innerHeight,
                outerWidth: window.outerWidth,
                innerWidth: window.innerWidth,
                widthDiff: window.outerWidth - window.innerWidth,
                thresholds: { heightThreshold, widthThreshold }
            });
            
            // إذا كان التكبير 125% أو أكثر، نحتاج معايير أكثر صرامة
            if (zoom >= 125) {
                return (window.outerHeight - window.innerHeight > heightThreshold && 
                        window.outerWidth - window.innerWidth > widthThreshold);
            }
            
            return (window.outerHeight - window.innerHeight > heightThreshold || 
                    window.outerWidth - window.innerWidth > widthThreshold);
        }

        // كشف بالتوقيت المحسّن
        function detectDevToolsByTiming() {
            const start = performance.now();
            
            // استخدام console.log بدلاً من debugger لتجنب التوقف غير المرغوب فيه
            const obj = {};
            Object.defineProperty(obj, 'id', {
                get: function() {
                    throw new Error('DevTools detected');
                }
            });
            
            try {
                console.log(obj);
                console.clear();
            } catch(e) {
                const end = performance.now();
                return end - start > 100;
            }
            
            const end = performance.now();
            return end - start > 100;
        }

        // كشف بحجم وحدة التحكم
        function detectDevToolsByConsole() {
            const zoom = getAccurateZoomLevel();
            const threshold = zoom >= 125 ? 250 : 160;
            
            if (window.outerHeight - window.innerHeight > threshold || 
                window.outerWidth - window.innerWidth > threshold) {
                return true;
            }
            
            return false;
        }

        // كشف بـ toString
        function detectDevToolsByToString() {
            let devtools = false;
            let element = new Image();
            element.__defineGetter__('id', function() {
                devtools = true;
            });
            
            try {
                console.log(element);
                console.clear();
            } catch(e) {
                // تجاهل الأخطاء
            }
            
            return devtools;
        }

        // حظر أدوات المطور - فوري وبدون خيارات
        function blockDevTools() {
            if (!devToolsOpen) {
                devToolsOpen = true;
                DevToolsLogger.addLog('blocked', {
                    method: 'automatic_block',
                    zoom: getAccurateZoomLevel()
                });
                
                document.body.innerHTML = `
                    <div class="blocked">
                        <h11>Block By ZAKARIA0_DZ</h11>
                        <h2>⚠️ ACCESS DENIED</h2>
                        <p>Developer tools detected!</p>
                        <p>This content is protected.</p>
                        <p>Please close developer tools to continue.</p>
                        <p><small>Refresh the page after closing dev tools</small></p>
                        <p><small>If zoom is 125%+, try reducing zoom level</small></p>
                        <p><small>Current zoom: ${getAccurateZoomLevel()}%</small></p>
                    </div>
                `;
                
                // تنظيف وحدة التحكم
                if (typeof console !== 'undefined') {
                    console.clear();
                    console.log('%cSTOP!', 'color: red; font-size: 50px; font-weight: bold;');
                    console.log('%cThis is a browser feature intended for developers. Content is protected.', 'color: red; font-size: 16px;');
                }
            }
        }

        // وظيفة الفحص الرئيسية
        function checkForDevTools() {
            const zoom = getAccurateZoomLevel();
            
            const sizeDetected = detectDevToolsBySize();
            const consoleDetected = detectDevToolsByConsole();
            const timingDetected = detectDevToolsByTiming();
            
            const detected = sizeDetected || consoleDetected || timingDetected;
            
            if (detected) {
                DevToolsLogger.addLog('detected', {
                    methods: {
                        size: sizeDetected,
                        console: consoleDetected,
                        timing: timingDetected
                    },
                    zoom: zoom
                });
                
                // حظر فوري
                blockDevTools();
            }
        }

        // تعطيل اختصارات أدوات المطور
        document.addEventListener('keydown', function(e) {
            const shortcuts = [
                { key: 123, name: 'F12' },
                { ctrl: true, shift: true, key: 73, name: 'Ctrl+Shift+I' },
                { ctrl: true, shift: true, key: 74, name: 'Ctrl+Shift+J' },
                { ctrl: true, key: 85, name: 'Ctrl+U' },
                { ctrl: true, shift: true, key: 67, name: 'Ctrl+Shift+C' }
            ];
            
            for (let shortcut of shortcuts) {
                if (shortcut.key === e.keyCode && 
                    (!shortcut.ctrl || e.ctrlKey) && 
                    (!shortcut.shift || e.shiftKey)) {
                    
                    e.preventDefault();
                    DevToolsLogger.addLog('shortcut_blocked', {
                        shortcut: shortcut.name,
                        keyCode: e.keyCode
                    });
                    alert(`${shortcut.name} is disabled`);
                    return false;
                }
            }
        });

        // حدث تغيير حجم النافذة
        window.addEventListener('resize', function() {
            setTimeout(checkForDevTools, 100); // تأخير صغير لتجنب الكشف الخاطئ
        });

        // فحص دوري
        setInterval(checkForDevTools, 1000); // فحص كل ثانية

        // رسائل تحذيرية في وحدة التحكم
        console.log('%cSTOP!', 'color: red; font-size: 50px; font-weight: bold;');
        console.log('%cThis is a browser feature intended for developers.', 'color: red; font-size: 16px;');
        console.log('%cIf someone told you to copy-paste something here, it is probably a scam.', 'color: red; font-size: 16px;');

        // فحص أولي عند تحميل الصفحة
        window.addEventListener('load', function() {
            // فحص فوري بعد تحميل الصفحة
            setTimeout(checkForDevTools, 500);
        });

        // منع النقر بالزر الأيمن
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            DevToolsLogger.addLog('right_click_blocked', {
                x: e.clientX,
                y: e.clientY
            });
            return false;
        });

        // منع التحديد
        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
            return false;
        });

        // منع السحب
        document.addEventListener('dragstart', function(e) {
            e.preventDefault();
            return false;
        });

        // تصدير وظائف للاستخدام في وحدة التحكم (لأغراض التشخيص)
        window.DevToolsDebug = {
            getLogs: () => DevToolsLogger.getLogs(),
            clearLogs: () => DevToolsLogger.clearLogs(),
            getZoom: () => getAccurateZoomLevel(),
            checkStatus: () => ({
                devToolsOpen,
                zoom: getAccurateZoomLevel(),
                windowInfo: {
                    inner: { width: window.innerWidth, height: window.innerHeight },
                    outer: { width: window.outerWidth, height: window.outerHeight }
                }
            })
        };
    </script>
</body>
</html>
